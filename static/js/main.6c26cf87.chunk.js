(this["webpackJsonpenglish-fight-ui"]=this["webpackJsonpenglish-fight-ui"]||[]).push([[0],{354:function(e,t,n){},355:function(e,t,n){},372:function(e,t,n){},373:function(e,t,n){},375:function(e,t,n){},380:function(e,t,n){"use strict";n.r(t);n(249),n(275),n(277),n(278),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317);var r=n(2),a=n(0),c=n.n(a),o=n(170),i=n(70),s=n.n(i),u=n(7),l=n.n(u),d=n(15),j=n(32),b=n(182),f=n.n(b),p=n(184),h=n.n(p),O=(n(327),n(20)),v=n(48),m=n(171),x=n(127),k=n(172),y=n.n(k),w=function(){function e(){Object(O.a)(this,e)}return Object(v.a)(e,null,[{key:"post",value:function(){var t=Object(d.a)(l.a.mark((function t(n,r){var a,c,o,i,s,u,d,j=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=j.length>2&&void 0!==j[2]?j[2]:{},c=a.sendToken,o=void 0===c||c,i=a.expand,s=void 0===i?"":i,u=a.Model,d=void 0===u?null:u,t.abrupt("return",e.send(n,{data:e.convertDataToBackendFormat(r),sendToken:o,method:"POST",expand:s,Model:d}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"patch",value:function(){var t=Object(d.a)(l.a.mark((function t(n,r){var a,c,o,i,s,u,d,j=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=j.length>2&&void 0!==j[2]?j[2]:{},c=a.sendToken,o=void 0===c||c,i=a.expand,s=void 0===i?"":i,u=a.Model,d=void 0===u?null:u,t.abrupt("return",e.send(n,{data:e.convertDataToBackendFormat(r),sendToken:o,method:"PATCH",expand:s,Model:d}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"get",value:function(){var t=Object(d.a)(l.a.mark((function t(n){var r,a,c,o,i,s=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},a=r.expand,c=void 0===a?"":a,o=r.Model,i=void 0===o?null:o,t.abrupt("return",e.send(n,{sendToken:!0,method:"GET",expand:c,Model:i}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"send",value:function(){var t=Object(d.a)(l.a.mark((function t(n,r){var a,c,o,i,s,u,d,j,b,f;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.data,c=r.sendToken,o=r.method,i=r.expand,s=r.Model,u=void 0===s?null:s,d=new URLSearchParams,i&&(j=y()(i).join(","),d.append("expand",j)),b={headers:e.createHeaders({sendToken:c})},"GET"!==o&&(b.mode="cors",b.body=JSON.stringify(a)),b.method=o,t.next=8,Object(m.timeout)(fetch(e.createFullUrl(n,d),b),1e4);case 8:return f=t.sent,t.abrupt("return",e.processResponse(f,u));case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"createHeaders",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.sendToken,r={Accept:"application/json","Content-Type":"application/json"};return n&&(r.Authorization=e.getAuthorizationHeader()),r}},{key:"getAuthorizationHeader",value:function(){var e=window.location.search.slice(1);return"QueryString ".concat(e)}},{key:"createFullUrl",value:function(t,n){var r=e.removeTrailingSlash("https://enfight.tmweb.ru/api"),a="".concat(r,"/").concat(t);return n&&String(n)&&(a+="?".concat(String(n))),a}},{key:"processResponse",value:function(){var t=Object(d.a)(l.a.mark((function t(n){var r,a,c=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:null,!(n.status>=500&&n.status<600)){t.next=3;break}throw new Error("\u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430");case 3:return t.prev=3,t.next=6,n.json();case 6:a=t.sent,t.next=12;break;case 9:throw t.prev=9,t.t0=t.catch(3),new Error("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430");case 12:if(n.ok){t.next=16;break}if(!a.detail){t.next=15;break}throw new Error(a.detail);case 15:throw new Error("\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f");case 16:return t.abrupt("return",e.convertDataToFrontendFormat(a,r));case 17:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}()},{key:"convertDataToBackendFormat",value:function(e){return Object(x.toSnake)(e)}},{key:"convertDataToFrontendFormat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(x.toCamel)(e);return t?t.fromObject(n):n}},{key:"removeTrailingSlash",value:function(e){return e.endsWith("/")?e.slice(0,-1):e}}]),e}(),g=n(64),S=n(63),N=n(95),B=n(173),T=n.n(B),C=n(11),P=n.n(C);function E(e){return function(t){return T()(t,e)}}function A(e,t){return this.constructor.update(this,Object(N.a)({},e,{$set:t}))}function F(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object(C.struct)(e,{strict:!0,name:t,defaultProps:n});return r.fromObject=E(r),r.prototype.set=A,r}var M=Object(C.irreducible)("Null",(function(e){return null===e})),U=Object(C.refinement)(P.a.Number,(function(e){return e>=0}),"PositiveNumber"),Q=Object(C.refinement)(P.a.Number,(function(e){return e>=1}),"ID"),q=function(e){Object(g.a)(n,e);var t=Object(S.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return n}(F({id:Q,vkId:Q,firstName:P.a.String,lastName:P.a.String,photoUrl:P.a.String,score:U,foreverRank:U,monthlyRank:U},"User")),G=function(){function e(){Object(O.a)(this,e)}return Object(v.a)(e,null,[{key:"fetchUserData",value:function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.get("user",{Model:q}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),R=(n(354),function(){function e(){Object(O.a)(this,e)}return Object(v.a)(e,null,[{key:"waitForTimeout",value:function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,t)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}());R.isProductionMode=!0;var z=n(382),D=(n(355),function(){function e(){Object(O.a)(this,e)}return Object(v.a)(e,[{key:"init",value:function(){console.log("Init tracker")}},{key:"reachGoal",value:function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Reach goal ".concat(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),I=function(){function e(){Object(O.a)(this,e)}return Object(v.a)(e,[{key:"init",value:function(){var e,t,n,r,a;e=window,t=document,n="script",e.ym=e.ym||function(){(e.ym.a=e.ym.a||[]).push(arguments)},e.ym.l=1*new Date,r=t.createElement(n),a=t.getElementsByTagName(n)[0],r.async=1,r.src="https://mc.yandex.ru/metrika/tag.js",a.parentNode.insertBefore(r,a);try{ym(70656700,"init",{clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,webvisor:!0})}catch(t){console.log("Seems like Yandex metrika is blocked"),console.warn(t)}}},{key:"reachGoal",value:function(e){return new Promise((function(t){try{window.ym(70656700,"reachGoal",e,(function(){return t()}))}catch(n){console.log("Seems like Yandex metrika is blocked"),console.warn(n)}}))}}]),e}(),H=new(R.isProductionMode?I:D),W=!1;function J(e){if(!W)throw new Error("Tracker was not initialized");H.reachGoal(e)}var K=n(12),L=function(e){Object(g.a)(n,e);var t=Object(S.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return n}(F({id:Q,questionWord:P.a.String,answerWords:P.a.list(P.a.String),correctAnswer:P.a.union([M,P.a.String]),selectedAnswer:P.a.union([M,P.a.String]),isCorrect:P.a.Boolean},"Question")),V=P.a.union([L,P.a.Number]);V.dispatch=function(e){return"number"===typeof e?P.a.Number:L};var Y=function(e){Object(g.a)(n,e);var t=Object(S.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return n}(F({id:Q,questions:P.a.list(V),points:P.a.Number},"Game")),_=function(){function e(){Object(O.a)(this,e)}return Object(v.a)(e,null,[{key:"startBattle",value:function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.post("game",{},{expand:"questions",Model:Y}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"submitQuestion",value:function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.patch("question/".concat(t.id),{selectedAnswer:t.selectedAnswer},{Model:L}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBattle",value:function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.get("game/".concat(t),{expand:"questions",Model:Y}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),$=n(57),X=n.n($),Z=n(82),ee=n.n(Z),te=n(73),ne=n.n(te),re=n(96),ae=n.n(re),ce=n(177),oe=n.n(ce),ie=n(33),se=n(176),ue=n.n(se),le=n(175),de=n.n(le);var je=function(){return Object(K.s)()===K.g?Object(r.jsx)(de.a,{}):Object(r.jsx)(ue.a,{})};function be(e){var t=e.panelHeaderProps,n=e.onBackButtonClick,a=e.text,c=e.showBackButton,o=Object(ie.a)({},t);return o.left=c?Object(r.jsx)(K.k,{onClick:n,children:Object(r.jsx)(je,{})}):void 0,Object(r.jsx)(K.j,Object(ie.a)(Object(ie.a)({},o),{},{children:a}))}be.defaultProps={panelHeaderProps:{},showBackButton:!0,onBackButtonClick:function(){}};var fe=function(e){var t=e.onStartBattle,n=e.user;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(be,{text:"English Clash",showBackButton:!1}),n&&Object(r.jsx)(ee.a,{children:Object(r.jsx)(ne.a,{before:n.photoUrl?Object(r.jsx)(oe.a,{src:n.photoUrl}):null,description:Object(r.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(r.jsxs)("span",{children:["\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0447\u043a\u043e\u0432 - ",n.score]})," ",Object(r.jsxs)("span",{children:["\u043c\u0435\u0441\u0442\u043e \u0432 \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0435: ",n.foreverRank]})]}),multiline:!0,children:"".concat(n.firstName," ").concat(n.lastName)})}),Object(r.jsx)(ee.a,{children:Object(r.jsx)(ae.a,{children:Object(r.jsx)(X.a,{size:"xl",onClick:t,children:"\u041d\u0430\u0447\u0430\u0442\u044c!"})})})]})};fe.defaultProps={user:null};var pe=fe,he=(n(372),n(178));function Oe(e){var t=e.questionWord,n=e.answerWords,a=e.selectedAnswer,c=e.isCorrect,o=e.correctAnswer,i=e.onSelectAnswer;return Object(r.jsxs)(ae.a,{children:[Object(r.jsxs)("p",{children:["\u0421\u043b\u043e\u0432\u043e \u043d\u0430 \u0430\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u043e\u043c: ",t]}),Object(r.jsx)("p",{children:" \u0412\u044b\u0431\u0435\u0440\u0438 \u0435\u0433\u043e \u043f\u0435\u0440\u0435\u0432\u043e\u0434 \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u0438\u0439:"}),n.map((function(e){var t=e===o,n=!c&&e===a,s=Object(he.a)("answer-button",{correct:t,failure:n});return Object(r.jsx)(X.a,{size:"xl",mode:"primary",stretched:!0,className:s,onClick:function(){return!a&&i(e)},children:e},e)}))]})}Oe.defaultProps={correctAnswer:null,selectedAnswer:null,isCorrect:!1};var ve=Oe,me=n(129),xe="setBattle",ke="updateQuestion",ye="goToNextQuestion",we={battle:null,activeQuestion:null,hasNextQuestion:!1};function ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xe:var n=t.payload,r=n.questions;return Object(ie.a)(Object(ie.a)({},e),{},{battle:n,activeQuestion:r[0],hasNextQuestion:r.length>1});case ke:var a=t.payload,c=e.battle.questions,o=c.findIndex((function(e){return e.id===a.id})),i=[].concat(Object(me.a)(c.slice(0,o)),[a],Object(me.a)(c.slice(o+1)));return Object(ie.a)(Object(ie.a)({},e),{},{battle:Object(ie.a)(Object(ie.a)({},e.battle),{},{questions:i}),activeQuestion:a});case ye:var s=e.battle.questions,u=s.findIndex((function(t){return t.id===e.activeQuestion.id}));if(u===s.length-1)throw new Error("\u0412\u044b \u0443\u0436\u0435 \u043d\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u043c \u0432\u043e\u043f\u0440\u043e\u0441\u0435");var l=u+1;return Object(ie.a)(Object(ie.a)({},e),{},{activeQuestion:s[l],hasNextQuestion:l<s.length-1});default:return e}}var Se=n(21),Ne=n.n(Se);function Be(e){var t=e.delay,n=e.render,r=Object(a.useState)(!1),c=Object(j.a)(r,2),o=c[0],i=c[1];return Object(a.useEffect)((function(){var e=setTimeout((function(){i(!0)}),t);return function(){clearTimeout(e)}}),[t]),o?n():null}Be.propTypes={delay:Ne.a.number,render:Ne.a.func},Be.defaultProps={delay:200,render:function(){return Object(r.jsx)(K.l,{size:"large"})}};var Te=Be,Ce=function(e){var t=e.onGoBack,n=e.onFinishGame,c=Object(a.useState)(!1),o=Object(j.a)(c,2),i=o[0],s=o[1],u=Object(a.useReducer)(ge,we),b=Object(j.a)(u,2),f=b[0],p=b[1],h=f.battle,O=f.activeQuestion,v=f.hasNextQuestion;Object(a.useEffect)((function(){(function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,_.startBattle();case 4:t=e.sent,p({type:xe,payload:t});case 6:return e.prev=6,s(!1),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[1,,6,9]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var m=function(){var e=Object(d.a)(l.a.mark((function e(t){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=O.set("selectedAnswer",t),s(!0),e.prev=2,e.next=5,_.submitQuestion(r);case 5:a=e.sent,p({type:ke,payload:a});case 7:return e.prev=7,s(!1),e.finish(7);case 10:return e.next=12,R.waitForTimeout(1e3);case 12:v?p({type:ye}):n(h);case 13:case"end":return e.stop()}}),e,null,[[2,,7,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(be,{onBackButtonClick:t,text:"\u0418\u0433\u0440\u0430"}),O&&Object(r.jsx)(ve,Object(ie.a)(Object(ie.a)({},O),{},{onSelectAnswer:m})),i&&Object(r.jsx)(Te,{})]})};Ce.defaultProps={user:null};var Pe=Ce,Ee=n(99),Ae=n.n(Ee),Fe=n(179),Me=n.n(Fe),Ue=(n(373),n(180)),Qe=n.n(Ue),qe=n(181),Ge=n.n(qe);function Re(e){var t=e.onGoBack,n=e.battle,a=e.onRetry,c=n.questions,o=n.points,i=c.filter((function(e){return e.isCorrect})).length,s=c.length-i;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(be,{text:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b",onBackButtonClick:t}),Object(r.jsxs)(ee.a,{header:Object(r.jsx)(Me.a,{mode:"secondary",children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"}),children:[Object(r.jsx)(ne.a,{indicator:Object(r.jsx)(Ae.a,{mode:"primary",children:i}),children:"\u0412\u0435\u0440\u043d\u044b\u0445 \u043e\u0442\u0432\u0435\u0442\u043e\u0432:"}),Object(r.jsx)(ne.a,{indicator:Object(r.jsx)(Ae.a,{mode:"primary",children:s}),children:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0445 \u043e\u0442\u0432\u0435\u0442\u043e\u0432:"}),Object(r.jsx)(ne.a,{indicator:Object(r.jsx)(Ae.a,{mode:"primary",children:o}),children:"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u043e \u043e\u0447\u043a\u043e\u0432:"})]}),Object(r.jsxs)("div",{className:"home-button-wrapper",children:[Object(r.jsx)(X.a,{onClick:t,size:"l",before:Object(r.jsx)(Qe.a,{}),children:"\u0414\u043e\u043c\u043e\u0439"}),Object(r.jsx)(X.a,{onClick:a,size:"l",before:Object(r.jsx)(Ge.a,{}),children:"\u0415\u0449\u0435 \u0440\u0430\u0437"})]})]})}Re.defaultProps={battle:null};var ze=Re,De=n(388),Ie=n(389),He=function(e){Object(g.a)(n,e);var t=Object(S.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return n}(F({id:Q,firstName:P.a.String,lastName:P.a.String,photoUrl:P.a.String,score:U},"ScoreboardUser"));n(375);var We=function(e){var t=e.rank,n=e.score,a=e.photoUrl,c=e.firstName,o=e.lastName;return Object(r.jsx)(K.m,{before:Object(r.jsx)(K.b,{children:t}),after:n,children:Object(r.jsxs)("div",{className:"scoreboard-item",children:[Object(r.jsx)(K.a,{size:40,src:a}),Object(r.jsxs)("div",{className:"scoreboard-item-name",children:[c," ",o]})]})})},Je="forever",Ke="monthly";function Le(e){var t=e.user,n=Object(a.useState)([]),c=Object(j.a)(n,2),o=c[0],i=c[1],s=Object(a.useState)(!1),u=Object(j.a)(s,2),b=u[0],f=u[1],p=Object(a.useState)(Je),h=Object(j.a)(p,2),O=h[0],v=h[1],m=Object(a.useState)(!1),x=Object(j.a)(m,2),k=x[0],y=x[1];return Object(a.useEffect)((function(){(function(){var e=Object(d.a)(l.a.mark((function e(){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i([]),f(!0),e.next=4,w.get("".concat(O,"_scoreboard"));case 4:n=e.sent,r=He.fromObject(t),y(Boolean(n.find((function(e){return e.id===r.id})))),i(n),f(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[O,t]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(be,{text:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433",showBackButton:!1}),Object(r.jsx)(K.e,{vertical:"top",children:Object(r.jsxs)(K.p,{children:[Object(r.jsx)(K.q,{selected:O===Je,onClick:function(){return v(Je)},children:"\u0417\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f"}),Object(r.jsx)(K.q,{selected:O===Ke,onClick:function(){return v(Ke)},children:"\u0417\u0430 \u043c\u0435\u0441\u044f\u0446"})]})}),Object(r.jsx)(K.c,{children:Object(r.jsxs)(K.f,{style:{paddingTop:"20px"},children:[!b&&Object(r.jsxs)(K.h,{children:[o.map((function(e,t){var n=e.id,a=e.firstName,c=e.lastName,o=e.photoUrl,i=e.score;return Object(r.jsx)(We,{rank:t+1,score:i,photoUrl:o,firstName:a,lastName:c},n)})),!k&&Object(r.jsx)(We,{rank:O===Je?t.foreverRank:t.monthlyRank,score:t.score,photoUrl:t.photoUrl,firstName:t.firstName,lastName:t.lastName})]}),b&&Object(r.jsx)(Te,{})]})})]})}Le.defaultProps={user:null};var Ve=Le,Ye=function(){var e=Object(a.useState)(null),t=Object(j.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(Object(r.jsx)(f.a,{})),i=Object(j.a)(o,2),s=i[0],u=i[1],b=Object(a.useState)("game"),p=Object(j.a)(b,2),O=p[0],v=p[1],m=Object(a.useState)("home"),x=Object(j.a)(m,2),k=x[0],y=x[1],w=Object(a.useState)(null),g=Object(j.a)(w,2),S=g[0],N=g[1];function B(){return T.apply(this,arguments)}function T(){return(T=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.fetchUserData();case 3:t=e.sent,c(t);case 5:return e.prev=5,u(null),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[0,,5,8]])})))).apply(this,arguments)}Object(a.useEffect)((function(){R.isProductionMode&&z.a({dsn:"https://ae49049c58d94887bed337d523675ca6@o158161.ingest.sentry.io/5554359",beforeSend:function(e,t){if(e.exception){var n=t&&t.originalException&&t.originalException instanceof Error&&t.originalException.message?t.originalException.message:"";u(Object(r.jsxs)(h.a,{actions:[{mode:"default",title:"\u041e\u041a",autoclose:!0}],onClose:function(){return u(null)},children:[Object(r.jsx)("h2",{children:"\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 =("}),n&&Object(r.jsx)("p",{className:"error-message",children:n}),Object(r.jsx)("p",{children:"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439 \u0435\u0449\u0435 \u0440\u0430\u0437"})]}))}return e}}),W||(H.init(),W=!0)}),[]),Object(a.useEffect)((function(){B()}),[]);var C=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.getBattle(t.id);case 2:n=e.sent,N(n),y("results"),J("finish-game"),B();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){return y("home")},E=function(){y("battle"),J("start-game")};return Object(r.jsxs)(K.d,{activeStory:O,tabbar:Object(r.jsxs)(K.n,{children:[Object(r.jsx)(K.o,{text:"\u0418\u0433\u0440\u0430",selected:"game"===O,onClick:function(){v("game"),y("home")},children:Object(r.jsx)(De.a,{})}),Object(r.jsx)(K.o,{text:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433",selected:"scoreboard"===O,onClick:function(){v("scoreboard"),y("scoreboard-home")},children:Object(r.jsx)(Ie.a,{})})]}),children:[Object(r.jsxs)(K.r,{id:"game",activePanel:k,popout:s,children:[Object(r.jsx)(K.i,{id:"home",children:Object(r.jsx)(pe,{user:n,onStartBattle:E})}),Object(r.jsx)(K.i,{id:"battle",children:Object(r.jsx)(Pe,{onGoBack:P,user:n,onFinishGame:C})}),Object(r.jsx)(K.i,{id:"results",children:Object(r.jsx)(ze,{onRetry:E,onGoBack:P,battle:S})})]}),Object(r.jsx)(K.r,{id:"scoreboard",activePanel:k,popout:s,children:Object(r.jsx)(K.i,{id:"scoreboard-home",children:Object(r.jsx)(Ve,{user:n})})})]})},_e=n(390);function $e(e){var t=e.children;return R.isProductionMode?Object(r.jsx)(_e.a,{fallback:function(e){var t=e.error,n=e.componentStack,a=e.resetError;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0442\u0440\u0438\u0441\u043e\u0432\u043a\u0438:"}),Object(r.jsx)("p",{children:t.message}),Object(r.jsx)("p",{children:n}),Object(r.jsx)(X.a,{onClick:a,children:"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0435\u0449\u0435 \u0440\u0430\u0437"})]})},children:t}):t}s.a.send("VKWebAppInit"),s.a.subscribe((function(e){var t=e.detail,n=t.type,r=t.data;if("VKWebAppUpdateConfig"===n){var a=document.createAttribute("scheme");a.value=r.scheme||"client_light",document.body.attributes.setNamedItem(a)}})),Object(o.render)(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)($e,{children:Object(r.jsx)(Ye,{})})}),document.getElementById("root")),R.isProductionMode||Promise.all([n.e(3),n.e(4)]).then(n.bind(null,394))}},[[380,1,2]]]);
//# sourceMappingURL=main.6c26cf87.chunk.js.map